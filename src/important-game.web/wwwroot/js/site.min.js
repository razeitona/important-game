!function(){"use strict";const t={UTC:{offset:0,label:"UTC"},GMT:{offset:0,label:"GMT"},CET:{offset:1,label:"CET (Central European Time)"},PST:{offset:-8,label:"PST (Pacific Standard Time)"}},e="user_timezone";class n{constructor(){this.currentTimezone=this.loadTimezone(),this.init()}init(){localStorage.getItem(e)||this.detectAndSetTimezone(),this.convertAllDates(),this.setupTimezoneSelector()}detectAndSetTimezone(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;let n="UTC";e.includes("Europe/")?n="CET":e.includes("America/Los_Angeles")||e.includes("America/Vancouver")?n="PST":(e.includes("GMT")||e.includes("London"))&&(n="GMT"),this.setTimezone(n,!0),this.showNotification(`Timezone automatically set to ${t[n].label}`)}catch(t){console.error("Error detecting timezone:",t),this.setTimezone("UTC",!1)}}loadTimezone(){return localStorage.getItem(e)||"UTC"}setTimezone(n,a=!0){if(!t[n])return void console.error("Invalid timezone:",n);this.currentTimezone=n,a&&localStorage.setItem(e,n);const o=document.getElementById("timezoneSelector");o&&(o.value=n)}getTimezoneOffset(){return t[this.currentTimezone].offset}convertUTCtoTimezone(t){try{const e=t.trim().split(" "),n=e[0].split("/");if(3!==n.length)return t;let a=0,o=0,i=!1;if(e.length>=2){const t=e[1].split(":");2===t.length&&(a=parseInt(t[0]),o=parseInt(t[1]),i=!0)}const s=new Date(Date.UTC(parseInt(n[2]),parseInt(n[1])-1,parseInt(n[0]),a,o)),c=this.getTimezoneOffset();s.setHours(s.getHours()+c);const r=String(s.getDate()).padStart(2,"0"),l=String(s.getMonth()+1).padStart(2,"0"),d=s.getFullYear();if(i){const t=String(s.getHours()).padStart(2,"0");return`${r}/${l}/${d} ${t}:${String(s.getMinutes()).padStart(2,"0")}`}return`${r}/${l}/${d}`}catch(e){return console.error("Error converting date:",e,t),t}}convertAllDates(){document.querySelectorAll("time[data-utc-time]").forEach(t=>{const e=t.getAttribute("data-utc-time"),n=this.convertUTCtoTimezone(e);t.textContent=n,t.setAttribute("title",`UTC: ${e}`)})}setupTimezoneSelector(){const e=document.getElementById("timezoneSelector");e&&(e.value=this.currentTimezone,e.addEventListener("change",e=>{const n=e.target.value;this.setTimezone(n,!0),this.convertAllDates(),this.showNotification(`Timezone changed to ${t[n].label}`)}))}showNotification(t){const e=document.getElementById("timezoneNotification");e&&e.remove();const n=document.createElement("div");n.id="timezoneNotification",n.className="timezone-notification",n.textContent=t,document.body.appendChild(n),setTimeout(()=>{n.classList.add("show")},100),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>{n.remove()},300)},4e3)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.timezoneManager=new n}):window.timezoneManager=new n}(),function(){"use strict";window.loadingManager=new class{showLoading(t,e=300){const n=document.getElementById(t);if(!n)return void console.warn(`Section ${t} not found`);const a=n.querySelector(".skeleton-content"),o=n.querySelector(".actual-content");a&&o?(o.style.display="none",a.style.display="grid",this._loadingStartTime=Date.now(),this._minDuration=e):console.warn(`Skeleton or actual content not found in ${t}`)}async hideLoading(t){const e=document.getElementById(t);if(!e)return void console.warn(`Section ${t} not found`);const n=e.querySelector(".skeleton-content"),a=e.querySelector(".actual-content");if(n&&a){if(this._loadingStartTime&&this._minDuration){const t=Date.now()-this._loadingStartTime,e=Math.max(0,this._minDuration-t);e>0&&await new Promise(t=>setTimeout(t,e))}n.style.display="none",a.style.display="",this._loadingStartTime=null,this._minDuration=null}else console.warn(`Skeleton or actual content not found in ${t}`)}async simulateLoading(t,e=2e3){this.showLoading(t,300),await new Promise(t=>setTimeout(t,e)),await this.hideLoading(t)}async withLoading(t,e,n=300){this.showLoading(t,n);try{const n=await e();return await this.hideLoading(t),n}catch(e){throw await this.hideLoading(t),e}}showSpinner(t="Loading..."){this.hideSpinner();const e=document.createElement("div");e.id="globalLoadingSpinner",e.className="loading-spinner",e.innerHTML=`\n                <div class="spinner"></div>\n                <div class="spinner-text">${t}</div>\n            `,document.body.appendChild(e)}hideSpinner(){const t=document.getElementById("globalLoadingSpinner");t&&t.remove()}},function(){const t=document.querySelector("header");if(!t)return;let e=window.scrollY,n=!1;function a(){const a=window.scrollY;a>10?t.classList.add("scrolled"):t.classList.remove("scrolled"),e=a,n=!1}window.addEventListener("scroll",function(){n||(window.requestAnimationFrame(a),n=!0)},{passive:!0})}(),function(){const t=document.createElement("div");function e(e){t.innerHTML=`<i class="bi bi-check-circle"></i> ${e}`,t.classList.add("show"),setTimeout(()=>{t.classList.remove("show")},3e3)}t.className="share-notification",document.body.appendChild(t),document.addEventListener("click",function(t){const n=t.target.closest(".share-btn");if(!n)return;t.preventDefault(),t.stopPropagation();const a=n.dataset.shareType,o=n.dataset.matchTitle,i=n.dataset.matchScore;let s=window.location.pathname;const c=n.closest(".match-card-simple");if(c){const t=c.querySelector(".match-card-share-trigger");t&&(s=t.dataset.matchUrl)}switch(a){case"whatsapp":!function(t,e,n){const a=`${t} - Excitement Score: ${e}\nCheck out this match on Match to Watch!`,o=window.location.origin+n,i=`https://wa.me/?text=${encodeURIComponent(a+"\n"+o)}`;window.open(i,"_blank")}(o,i,s);break;case"twitter":!function(t,e,n){const a=`${t} - Excitement Score: ${e}`,o=window.location.origin+n,i=`https://twitter.com/intent/tweet?text=${encodeURIComponent(a)}&url=${encodeURIComponent(o)}&hashtags=matchtowatch,football,soccer`;window.open(i,"_blank")}(o,i,s);break;case"facebook":!function(t){const e=window.location.origin+t,n=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`;window.open(n,"_blank")}(s);break;case"copy":!function(t){const n=window.location.origin+t;navigator.clipboard.writeText(n).then(()=>{e("Link copied to clipboard!")}).catch(()=>{const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.left="-999999px",document.body.appendChild(t),t.select();try{document.execCommand("copy"),e("Link copied to clipboard!")}catch(t){e("Failed to copy link")}document.body.removeChild(t)})}(s)}}),document.addEventListener("click",function(t){const e=t.target.closest(".match-card-share-trigger");if(!e)return;t.preventDefault(),t.stopPropagation();const n=e.closest(".match-card-simple");if(!n)return;const a=n.querySelector(".share-overlay");a&&a.classList.add("active")}),document.addEventListener("click",function(t){const e=t.target.closest(".share-overlay-close");if(!e)return;t.preventDefault(),t.stopPropagation();const n=e.closest(".share-overlay");n&&n.classList.remove("active")}),document.addEventListener("click",function(t){const e=t.target.closest(".share-overlay");e&&t.target===e&&e.classList.remove("active")}),document.addEventListener("click",function(t){(t.target.closest(".share-overlay-buttons")||t.target.closest(".share-overlay-title"))&&t.stopPropagation()})}(),function(){const t=document.querySelector(".match-detail");if(!t)return;let e=0,n=0,a=0;function o(){const t=sessionStorage.getItem("nextMatchUrl");t?window.location.href=t:window.timezoneManager&&window.timezoneManager.showNotification("No next match available")}function i(){const t=sessionStorage.getItem("prevMatchUrl");window.location.href=t||"/matches"}t.addEventListener("touchstart",function(t){const o=t.touches[0];e=o.clientX,n=o.clientY,a=Date.now()},{passive:!0}),t.addEventListener("touchend",function(t){const s=t.changedTouches[0],c=s.clientX,r=s.clientY,l=Date.now(),d=e-c,m=Math.abs(n-r),h=l-a;Math.abs(d)>50&&m<100&&h<300&&(d>0?o():i())},{passive:!0}),document.addEventListener("keydown",function(t){if("ArrowLeft"!==t.key||t.ctrlKey||t.altKey||t.shiftKey){if("ArrowRight"===t.key&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){const e=document.activeElement;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&(t.preventDefault(),o())}}else{const e=document.activeElement;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&(t.preventDefault(),i())}})}(),function(){if(!document.querySelector(".calendar-container"))return;const t=document.getElementById("calendarModal"),e=document.getElementById("modalTitle"),n=document.getElementById("modalBody"),a=document.getElementById("closeModalBtn"),o=(document.querySelectorAll(".calendar-day.has-matches"),document.getElementById("prevMonthBtn")),i=document.getElementById("nextMonthBtn");function s(t,e,n){let a=e+n,o=t;a<1?(a=12,o--):a>12&&(a=1,o++),window.location.href=`/calendar?year=${o}&month=${a}`}o&&o.addEventListener("click",function(){s(parseInt(this.dataset.year),parseInt(this.dataset.month),-1)}),i&&i.addEventListener("click",function(){s(parseInt(this.dataset.year),parseInt(this.dataset.month),1)});let c=0,r=0;const l=document.querySelector(".calendar-grid");function d(a,o,i){if(!window.calendarMatches||!window.calendarMatches[a])return;const s=window.calendarMatches[a];e.textContent=`Matches on ${["January","February","March","April","May","June","July","August","September","October","November","December"][i-1]} ${a}, ${o}`;let c='<div class="calendar-modal-matches-grid">';s.forEach(t=>{const e=Math.round(100*t.excitmentScore),n=t.excitmentScore.toFixed(2).replace(",","."),a=`/match/${t.homeSlug}-vs-${t.awaySlug}`,o=`${t.homeTeamName} vs ${t.awayTeamName}`,i=`${t.competitionName} - Excitement Score: ${e}%0A%0AWatch on: https://matcht owatch.com${a}`,s=new Date(t.matchDateUTC),r=s.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",l=new Date(s.getTime()+72e5).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",d=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(o)}&dates=${r}/${l}&details=${i}&location=&sf=true&output=xml`;c+=`\n                    <div class="card match-card-simple"\n                         style="--bgcolor: ${t.competitionBgColor};"\n                         data-game-score="${e}"\n                         data-game-league="${t.competitionId}">\n                        <a href="${a}" class="match-card-link">\n                            <div class="card-header match-header">\n                                <div>\n                                    <img src="/images/competition/${t.competitionId}.webp" alt="${t.competitionName}" width="1.2rem" />\n                                </div>\n                                <div class="match-header-title">${t.competitionName}</div>\n                                ${t.isLive?'<div class="match-card-live"><span>LIVE</span></div>':`<div class="match-card-time"><time>${t.matchDate}</time></div>`}\n                            </div>\n                            <div class="card-body match-card-body">\n                                <div class="match-card-content">\n                                    <div class="match-card-team">\n                                        <div class="match-card-team-logo">\n                                            <img src="/images/team/${t.homeTeamId}.webp" alt="${t.homeTeamName}" width="80px" />\n                                        </div>\n                                        <div class="match-card-team-name">\n                                            <span>${t.homeTeamName}</span>\n                                        </div>\n                                    </div>\n                                    <div class="match-card-score">\n                                        <div class="match-card-score-value" data-es="${n}" title="Excitement Score">\n                                            <i class="bi bi-fire es-fire-icon"></i> ${e}\n                                        </div>\n                                        <span>Excitment score</span>\n                                    </div>\n                                    <div class="match-card-team">\n                                        <div class="match-card-team-logo">\n                                            <img src="/images/team/${t.awayTeamId}.webp" alt="${t.awayTeamName}" width="80px" />\n                                        </div>\n                                        <div class="match-card-team-name">\n                                            <span>${t.awayTeamName}</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                        <div class="match-card-actions">\n                            <button class="match-card-action-calendar"\n                                    onclick="window.open('${d}', '_blank')"\n                                    title="Add to Google Calendar">\n                                <i class="bi bi-calendar-plus"></i>\n                                <span>Add to Calendar</span>\n                            </button>\n                        </div>\n                    </div>\n                `}),c+="</div>",n.innerHTML=c,t.classList.add("active")}function m(){t.classList.remove("active")}l&&(l.addEventListener("touchstart",function(t){c=t.touches[0].clientX,r=t.touches[0].clientY},{passive:!0}),l.addEventListener("touchend",function(t){const e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,a=c-e,i=Math.abs(r-n);if(Math.abs(a)>50&&i<100){const t=parseInt(o.dataset.year),e=parseInt(o.dataset.month);s(t,e,a>0?1:-1)}},{passive:!0})),document.addEventListener("click",function(t){const e=t.target.closest(".calendar-view-all");if(e){t.stopPropagation();return void d(parseInt(e.dataset.day),parseInt(e.dataset.year),parseInt(e.dataset.month))}const n=t.target.closest(".mini-match-card");if(n){t.stopPropagation();const e=n.dataset.matchId;if(e&&window.calendarMatches)for(const t in window.calendarMatches){const n=window.calendarMatches[t].find(t=>t.matchId==e);if(n){const t=`/match/${n.homeSlug}-vs-${n.awaySlug}`;return void(window.location.href=t)}}return}const a=t.target.closest(".calendar-day.has-matches");if(a&&!t.target.closest(".mini-match-card")&&!t.target.closest(".calendar-view-all")){d(parseInt(a.dataset.day),parseInt(a.dataset.year),parseInt(a.dataset.month))}}),a&&a.addEventListener("click",m),t&&t.querySelector(".calendar-modal-overlay").addEventListener("click",m),document.addEventListener("keydown",function(e){const n=document.activeElement;if("INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName)if("Escape"===e.key&&t.classList.contains("active"))m();else if("ArrowLeft"===e.key){s(parseInt(o.dataset.year),parseInt(o.dataset.month),-1)}else if("ArrowRight"===e.key){s(parseInt(o.dataset.year),parseInt(o.dataset.month),1)}})}(),function(){const t=document.getElementById("loginBtn"),e=document.getElementById("loginModal"),n=document.getElementById("closeLoginModal"),a=document.getElementById("googleSignInBtn"),o=e?.querySelector(".login-modal-overlay");function i(){e.classList.remove("active"),document.body.style.overflow=""}t&&e&&(t.addEventListener("click",function(){e.classList.add("active"),document.body.style.overflow="hidden"}),n&&n.addEventListener("click",i),o&&o.addEventListener("click",i),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.classList.contains("active")&&i()}),a&&a.addEventListener("click",function(){const t=encodeURIComponent(window.location.pathname+window.location.search);window.location.href=`/login?returnUrl=${t}`}),!t&&e.classList.contains("active")&&i())}(),function(){const t=document.querySelectorAll(".match-card-like-btn, .match-detail-like-btn");function e(t,e,n){t.dataset.liked=e;const a=t.querySelector("i"),o=t.querySelector(".like-count");e?(a.classList.remove("bi-heart"),a.classList.add("bi-heart-fill"),t.classList.add("liked")):(a.classList.remove("bi-heart-fill"),a.classList.add("bi-heart"),t.classList.remove("liked")),o&&(o.textContent=n||0,o.style.display=n>0?"inline":"none")}0!==t.length&&(t.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),async function(t){const n=parseInt(t.dataset.matchId),a=!("true"===t.dataset.liked);t.disabled=!0;try{const o=a?"POST":"DELETE",i=await fetch("/api/matchlike",{method:o,headers:{"Content-Type":"application/json",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]')?.value||""},body:JSON.stringify({matchId:n})});if(i.ok){const n=await i.json();e(t,n.liked,n.voteCount),t.classList.add("like-animate"),setTimeout(()=>t.classList.remove("like-animate"),300)}else{if(401!==i.status)throw new Error("Failed to toggle like");{const t=document.getElementById("loginModal");t&&(t.classList.add("active"),document.body.style.overflow="hidden")}}}catch(t){console.error("Error toggling like:",t),window.timezoneManager&&window.timezoneManager.showNotification("Failed to like match. Please try again.")}finally{t.disabled=!1}}(this)})}),async function(){for(const n of t){const t=parseInt(n.dataset.matchId);if(t)try{const a=await fetch(`/api/matchlike?matchId=${t}`);if(a.ok){const t=await a.json();e(n,t.liked,t.voteCount)}}catch(t){console.error("Error initializing like state:",t)}}}())}(),function(){const t=document.querySelectorAll(".team-favorite-btn");function e(t,e){t.setAttribute("data-favorite",e);const n=t.querySelector("i");e?(n.classList.remove("bi-star"),n.classList.add("bi-star-fill")):(n.classList.remove("bi-star-fill"),n.classList.add("bi-star"))}0!==t.length&&(t.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),async function(t){const n=parseInt(t.getAttribute("data-team-id")),a="true"===t.getAttribute("data-favorite");t.disabled=!0;try{const o=a?"DELETE":"POST",i=await fetch("/Api/FavoriteTeam",{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:n})});if(i.ok){const n=await i.json();e(t,n.isFavorite),t.classList.add("favorite-animate"),setTimeout(()=>t.classList.remove("favorite-animate"),300)}else{if(401!==i.status)throw new Error("Failed to toggle favorite");{const t=document.getElementById("loginModal");t&&(t.classList.add("active"),document.body.style.overflow="hidden")}}}catch(t){console.error("Error toggling favorite:",t),window.timezoneManager&&window.timezoneManager.showNotification("Failed to favorite team. Please try again.")}finally{t.disabled=!1}}(this)})}),async function(){for(const n of t){const t=parseInt(n.getAttribute("data-team-id"));if(t)try{const a=await fetch(`/Api/FavoriteTeam?teamId=${t}`);if(a.ok){e(n,(await a.json()).isFavorite)}}catch(t){console.error("Error loading favorite state:",t)}}}())}(),function(){const t=document.querySelectorAll(".match-card-action-like");if(t.length>0){async function c(){for(const e of t){const t=parseInt(e.dataset.matchId);if(t)try{const n=await fetch(`/api/matchlike?matchId=${t}`);if(n.ok){const t=await n.json();r(e,t.liked,t.voteCount)}}catch(t){console.error("Error initializing action like state:",t)}}}function r(t,e,n){t.dataset.liked=e;const a=t.querySelector("i"),o=t.querySelector(".action-like-count");a.className=e?"bi bi-hand-thumbs-up-fill":"bi bi-hand-thumbs-up",o&&(o.textContent=n&&n>0?n:"")}async function l(t){const e=t.closest(".match-card-simple"),n=parseInt(t.dataset.matchId),a=!("true"===t.dataset.liked);t.disabled=!0;try{const o=a?"POST":"DELETE",i=await fetch("/api/matchlike",{method:o,headers:{"Content-Type":"application/json",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]')?.value||""},body:JSON.stringify({matchId:n})});if(i.ok){const n=await i.json();r(t,n.liked,n.voteCount),e&&(e.classList.add("like-animate"),setTimeout(()=>e.classList.remove("like-animate"),300))}else{if(401!==i.status)throw new Error("Failed to toggle like");{const t=document.getElementById("loginModal");t&&(t.classList.add("active"),document.body.style.overflow="hidden")}}}catch(t){console.error("Error toggling action like:",t),window.timezoneManager&&window.timezoneManager.showNotification("Failed to like match. Please try again.")}finally{t.disabled=!1}}t.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),l(this)})}),c()}const e=document.getElementById("shareModal"),n=document.getElementById("closeShareModal"),a=e?.querySelector(".share-modal-overlay"),o=(document.getElementById("shareModalTitle"),document.querySelectorAll(".match-card-action-share"));let i={title:"",score:"",url:""};function s(){e&&(e.classList.remove("active"),i={title:"",score:"",url:""})}if(o.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();const n=this.closest(".match-card-simple");if(!n)return;!function(t,n,a,o){if(!e)return;i={title:t,score:n,url:a};const s=e.querySelector(".share-modal-content");if(s&&o){const t=o.getBoundingClientRect(),e=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft;let a=t.right+n+8,i=t.top+e;const c=230;a+c>window.innerWidth&&(a=t.left+n-c-8),i<e&&(i=e+8),s.style.left=a+"px",s.style.top=i+"px"}e.classList.add("active")}(n.dataset.matchTitle||"",n.dataset.matchScoreNum||"",n.dataset.matchUrl||"",this)})}),n&&n.addEventListener("click",s),a&&a.addEventListener("click",s),document.addEventListener("keydown",function(t){"Escape"===t.key&&e?.classList.contains("active")&&s()}),e){e.querySelectorAll(".share-modal-btn").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();switch(this.dataset.shareType){case"whatsapp":shareWhatsApp(i.title,i.score,i.url);break;case"twitter":shareTwitter(i.title,i.score,i.url);break;case"facebook":shareFacebook(i.url);break;case"copy":copyLink(i.url)}s()})})}}(),window.matchAlertsManager=new class{constructor(){this.STORAGE_KEY="match_alerts",this.CHECK_INTERVAL=6e4,this.ALERT_OFFSET_MINUTES=30,this.checkIntervalId=null,this.notificationPermission="default",this.init()}async init(){"Notification"in window&&(this.notificationPermission=Notification.permission),this.initializeAlertButtons(),this.startAlertChecker(),this.setupPermissionRequest()}getAlerts(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading alerts:",t),[]}}saveAlerts(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){console.error("Error saving alerts:",t)}}addAlert(t,e,n,a){const o=this.getAlerts(),i=o.findIndex(e=>e.matchId===t),s={matchId:t,matchTitle:e,matchDate:n,matchUrl:a,triggered:!1,createdAt:(new Date).toISOString()};return-1!==i?o[i]=s:o.push(s),this.saveAlerts(o),this.updateAllAlertButtons(),!0}removeAlert(t){let e=this.getAlerts();e=e.filter(e=>e.matchId!==t),this.saveAlerts(e),this.updateAllAlertButtons()}hasAlert(t){return this.getAlerts().some(e=>e.matchId===t)}async requestNotificationPermission(){if(!("Notification"in window))return window.timezoneManager&&window.timezoneManager.showNotification("Your browser does not support notifications"),!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return window.timezoneManager&&window.timezoneManager.showNotification("Notifications are blocked. Please enable them in your browser settings."),!1;try{const t=await Notification.requestPermission();return this.notificationPermission=t,"granted"===t?(window.timezoneManager&&window.timezoneManager.showNotification("Notifications enabled! You will receive alerts 30 minutes before kickoff."),!0):(window.timezoneManager&&window.timezoneManager.showNotification("Notification permission denied"),!1)}catch(t){return console.error("Error requesting notification permission:",t),!1}}setupPermissionRequest(){document.addEventListener("click",async t=>{t.target.closest(".match-alert-btn")&&"default"===Notification.permission&&await this.requestNotificationPermission()})}showNotification(t,e,n,a){if("Notification"in window&&"granted"===Notification.permission)try{const o=new Notification(t,{body:e,icon:n||"/images/logo.png",badge:"/images/logo.png",tag:"match-alert",requireInteraction:!0,vibrate:[200,100,200]});o.onclick=function(){window.focus(),a&&(window.location.href=a),o.close()}}catch(t){console.error("Error showing notification:",t)}}checkAlerts(){const t=this.getAlerts(),e=new Date;let n=!1;t.forEach(t=>{if(t.triggered)return;const a=new Date(t.matchDate),o=new Date(a.getTime()-6e4*this.ALERT_OFFSET_MINUTES);e>=o&&e<a&&(this.showNotification("Match Starting Soon! ⚽",`${t.matchTitle} starts in ${this.ALERT_OFFSET_MINUTES} minutes`,"/images/logo.png",t.matchUrl),t.triggered=!0,n=!0,window.timezoneManager&&window.timezoneManager.showNotification(`⚽ ${t.matchTitle} starts in ${this.ALERT_OFFSET_MINUTES} minutes!`))});const a=t.filter(t=>{const n=new Date(t.matchDate),a=new Date(n.getTime()+72e5);return e<a});(n||a.length!==t.length)&&this.saveAlerts(a)}startAlertChecker(){this.checkAlerts(),this.checkIntervalId=setInterval(()=>{this.checkAlerts()},this.CHECK_INTERVAL)}stopAlertChecker(){this.checkIntervalId&&(clearInterval(this.checkIntervalId),this.checkIntervalId=null)}initializeAlertButtons(){document.querySelectorAll(".match-alert-btn").forEach(t=>{parseInt(t.dataset.matchId)&&this.updateAlertButton(t),t.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation(),await this.toggleAlert(t)})})}updateAllAlertButtons(){document.querySelectorAll(".match-alert-btn").forEach(t=>this.updateAlertButton(t))}updateAlertButton(t){const e=parseInt(t.dataset.matchId),n=this.hasAlert(e);t.dataset.hasAlert=n;const a=t.querySelector("i"),o=t.querySelector(".alert-text");n?(a&&(a.className="bi bi-bell-fill"),o&&(o.textContent="Alert Set"),t.classList.add("active")):(a&&(a.className="bi bi-bell"),o&&(o.textContent="Set Alert"),t.classList.remove("active"))}async toggleAlert(t){const e=parseInt(t.dataset.matchId),n=t.dataset.matchTitle,a=t.dataset.matchDate,o=t.dataset.matchUrl;if(this.hasAlert(e))this.removeAlert(e),window.timezoneManager&&window.timezoneManager.showNotification("Alert removed");else{if("granted"!==Notification.permission&&!await this.requestNotificationPermission())return;this.addAlert(e,n,a,o),window.timezoneManager&&window.timezoneManager.showNotification(`Alert set for ${n} - You'll be notified 30 minutes before kickoff`)}t.classList.add("alert-animate"),setTimeout(()=>t.classList.remove("alert-animate"),300)}getAlertCount(){const t=this.getAlerts(),e=new Date;return t.filter(t=>{const n=new Date(t.matchDate);return e<n&&!t.triggered}).length}},window.getActiveAlertsCount=function(){return window.matchAlertsManager?window.matchAlertsManager.getAlertCount():0},console.log("Match Alerts System initialized"),function(){function t(){document.querySelectorAll(".ad-container").forEach(t=>{const e=t.querySelector(".adsbygoogle");if(!e)return;if(e.getAttribute("data-adsbygoogle-status"))return;const n=t.offsetWidth,a=t.offsetHeight;0!==n&&0!==a||(console.warn("Ad container has zero dimensions:",t.className),t.style.minWidth="300px",t.style.minHeight="90px",t.style.display="block",t.style.width="100%");let o=t.parentElement;for(;o&&o!==document.body;){const t=window.getComputedStyle(o);"none"!==t.display&&"hidden"!==t.visibility||console.warn("Ad container parent is hidden:",o),o=o.parentElement}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.addEventListener("load",function(){setTimeout(t,100)}),window.addEventListener("error",function(e){e.target&&"INS"===e.target.tagName&&e.target.classList.contains("adsbygoogle")&&(console.error("Ad failed to load, checking container dimensions..."),setTimeout(t,500))},!0),console.log("Google Ads dimension checker initialized")}()}();